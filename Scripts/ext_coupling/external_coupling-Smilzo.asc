#===============================================
#---- INIT GLOBAL VARS
ON_EVENT "AppInitialized"
{
EXECUTE file:("db:\\events.asc")    #nuovo

EXECUTE file:("db:\\ASC_HttpRequestDll.asc")
EXECUTE file:("db:\\ASC_GlobalFunctions_Conversion.asc")
EXECUTE file:("db:\\ASC_GlobalFunctions_JSON.asc")
EXECUTE file:("db:\\ASC_RandomDistributions.asc")
EXECUTE file:("db:\\translator.asc")
EXECUTE file:("db:\\mapKeySetFunctions_v2.asc")
#EXECUTE file:("db:\\reverse.asc")
EXECUTE file:("db:\\PIM_TO_PSM.asc")
EXECUTE file:("db:\\PSM_TO_FILE.asc")
EXECUTE file:("db:\\PSM_TYPES.asc")
EXECUTE file:("db:\\operation.asc")
EXECUTE file:("db:\\azure_dashboard_creation.asc")
EXECUTE file:("db:\\iot_scenario_creation.asc")
EXECUTE file:("db:\\models_from_azure.asc")

# imported from Davide's work
EXECUTE file:("db:\\auth.asc")
EXECUTE file:("db:\\DeviceSpecificationModel.asc")
EXECUTE file:("db:\\Export.asc")
EXECUTE file:("db:\\ExportLogicThingsBoard.asc")
EXECUTE file:("db:\\ExportScenarioThingsBoard.asc")
EXECUTE file:("db:\\ImportRuleChain.asc")
EXECUTE file:("db:\\ImportThingsBoard.asc")
EXECUTE file:("db:\\ImportLosant.asc")
}

ON_EVENT "AfterEditAttributeValue" {
    AFTER_EDIT_ATTR_VALUE
}

ON_EVENT "AfterCreateModelingNode" {
    AFTER_CREATE_MODELING_NODE
}

ON_EVENT "AfterCreateModelingConnector" {
    AFTER_CREATE_MODELING_CONNECTOR
}

ON_EVENT "ActivateModelWindow" {
    ACTIVATE_MODEL_WINDOW
}

ITEM "Send to BPMN editor" modeling:"Communicate with BPMN" 
EXPORT_TO_BPMN

ITEM "Import from BPMN editor" modeling:"Communicate with BPMN" 
IMPORT_FEATURE_PSM

ITEM "Generate Platform File" modeling:"PSM to code" sub-of:"Generate source files"
#EXECUTE file:("C:\\Users\\39389\\Desktop\\Laurea\\GithubRep\\Floware-X-IoT-library\\PSM_TO_FILE.asc")
PSM_TO_FILE

ITEM "Azure dashboard creation" modeling:"PSM to code" sub-of:"Deploy"
AZURE_DASHBOARD_CREATION

ITEM "Thingsboard" modeling:"PSM to code" sub-of:"Deploy"
EXPORT_THINGSBOARD

ITEM "Losant" modeling:"PSM to code" sub-of:"Deploy"
EXPORT_LOSANT

ITEM "Send PSM to FloWare Server" modeling:"PSM to code" sub-of:"Deploy"
SEND_FLOWARE_SERVER



ITEM "Export Feature Model json" modeling:"PSM to code" sub-of:"Generate source files"
TRANSLATE_PSM_TO_FILE

ITEM "Feature Model Selection" modeling:"PIM to PSM"
TRANSLATE_PIM_TO_PSM

ITEM "Azure" modeling:"PIM to PSM" sub-of:"Select platform"
PRESET_PSM platform:("Azure")

ITEM "Losant" modeling:"PIM to PSM" sub-of:"Select platform"
PRESET_PSM platform:("Losant")

ITEM "Thingsboard" modeling:"PIM to PSM" sub-of:"Select platform"
PRESET_PSM platform:("ThingsBoard")

ITEM "Devices operations" modeling:"Generate"
GENERATE_OPERATIONS

ITEM "Azure" modeling:"Generate" sub-of:"Model from platform"
MODELS_FROM_AZURE

ITEM "Losant" modeling:"Generate" sub-of:"Model from platform" 
IMPORT_LOSANT

ITEM "Thingsboard" modeling:"Generate" sub-of:"Model from platform" 
IMPORT_FROM_THINGSBOARD

ITEM "IoT Scenario and Logic" modeling:"IoT View Creation"
#EXECUTE file:("C:\\Users\\39389\\Desktop\\Laurea\\GithubRep\\Floware-X-IoT-library\\iot_scenario_creation.asc")
GENERATE_SCENARIO

ITEM "Device specification model" modeling:"Generate"
CREATE_DEVICE_SPECIFICATION_MODEL
